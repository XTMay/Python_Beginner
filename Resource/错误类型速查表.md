# Python 错误类型速查表

## 快速索引
- [语法错误 (SyntaxError)](#语法错误-syntaxerror)
- [缩进错误 (IndentationError)](#缩进错误-indentationerror)
- [类型错误 (TypeError)](#类型错误-typeerror)
- [值错误 (ValueError)](#值错误-valueerror)
- [除零错误 (ZeroDivisionError)](#除零错误-zerodivisionerror)
- [格式化速查](#格式化速查)

---

## 语法错误 (SyntaxError)

### 拼写错误

| 错误代码 | 原因 | 修正 |
|---------|------|------|
| `pirnt("Hello")` | 拼错关键字 | `print("Hello")` |
| `fi x > 5:` | 拼错 if | `if x > 5:` |
| `fro i in range(5):` | 拼错 for | `for i in range(5):` |
| `whlie True:` | 拼错 while | `while True:` |
| `dfe func():` | 拼错 def | `def func():` |
| `retrun x` | 拼错 return | `return x` |

### 符号错误

| 错误代码 | 原因 | 修正 |
|---------|------|------|
| `if x = 5:` | 赋值而非比较 | `if x == 5:` |
| `if x > 5` | 缺少冒号 | `if x > 5:` |
| `print("hello"` | 缺少右括号 | `print("hello")` |
| `print（"hi"）` | 中文括号 | `print("hi")` |
| `x = 5；` | 中文分号 | `x = 5` |
| `name = "Alice'` | 引号不匹配 | `name = "Alice"` |
| `for i in range(5)` | 缺少冒号 | `for i in range(5):` |

---

## 缩进错误 (IndentationError)

| 错误代码 | 原因 | 修正 |
|---------|------|------|
| `if x > 5:`<br>`print(x)` | 缺少缩进 | `if x > 5:`<br>`    print(x)` |
| `def f():`<br>`x = 5`<br>`    y = 10` | 缩进不一致 | `def f():`<br>`    x = 5`<br>`    y = 10` |
| Tab 和空格混用 | 缩进类型不一致 | 统一使用4个空格 |

---

## 类型错误 (TypeError)

| 错误代码 | 原因 | 修正 |
|---------|------|------|
| `"5" + 10` | 字符串+数字 | `int("5") + 10` 或 `"5" + str(10)` |
| `age = input(...)`<br>`age + 1` | input返回字符串 | `age = int(input(...))` |
| `"age: " + 25` | 字符串+数字 | `"age: " + str(25)` 或 `f"age: {25}"` |

---

## 值错误 (ValueError)

| 错误代码 | 原因 | 修正 |
|---------|------|------|
| `int("abc")` | 无法转换 | 使用 try-except |
| `int("3.14")` | 小数转int | `int(float("3.14"))` 或 `float("3.14")` |

### 修正示例
```python
# 错误
age = int(input("年龄："))

# 正确
try:
    age = int(input("年龄："))
except ValueError:
    print("请输入数字！")
```

---

## 除零错误 (ZeroDivisionError)

| 错误代码 | 原因 | 修正 |
|---------|------|------|
| `10 / 0` | 除以零 | 检查或 try-except |

### 修正示例
```python
# 方法1：检查
if denominator != 0:
    result = numerator / denominator

# 方法2：try-except
try:
    result = numerator / denominator
except ZeroDivisionError:
    print("不能除以零！")
```

---

## 格式化速查

### 小数位数

```python
x = 3.14159

# 保留位数
f"{x:.0f}"    # 3
f"{x:.1f}"    # 3.1
f"{x:.2f}"    # 3.14
f"{x:.4f}"    # 3.1416
```

### 人数计算（整数）

```python
total = 10
groups = 3

# 方法1：整除和余数
base = total // groups      # 3（每组基本人数）
extra = total % groups      # 1（剩余人数）

# 方法2：四舍五入
import math
per_group = round(total / groups)  # 3

# 方法3：向上取整
per_group = math.ceil(total / groups)  # 4

# 方法4：格式化输出
average = total / groups
print(f"{average:.0f}人")  # 3人
```

### 货币格式

```python
price = 19.99

f"${price:.2f}"           # $19.99
f"${price:,.2f}"          # $1,234.56（千位分隔符）
f"${price:>10.2f}"        # 右对齐，宽度10
```

### 百分比

```python
ratio = 0.856

f"{ratio:.0%}"    # 86%
f"{ratio:.1%}"    # 85.6%
f"{ratio:.2%}"    # 85.60%

# 或
percentage = ratio * 100
f"{percentage:.1f}%"  # 85.6%
```

### 字符串对齐

```python
text = "Python"

f"{text:<10}"     # "Python    "（左对齐）
f"{text:>10}"     # "    Python"（右对齐）
f"{text:^10}"     # "  Python  "（居中）
f"{text:*^10}"    # "**Python**"（用*填充）
```

---

## try-except 模板

### 基本模板

```python
try:
    # 可能出错的代码
    result = risky_operation()
except SpecificError:
    # 处理特定错误
    handle_error()
```

### 完整模板

```python
try:
    # 尝试执行
    result = operation()
except ValueError:
    # 值错误
    print("值错误")
except TypeError:
    # 类型错误
    print("类型错误")
except ZeroDivisionError:
    # 除零错误
    print("除零错误")
except Exception as e:
    # 其他所有错误
    print(f"错误：{e}")
else:
    # 没有错误时执行
    print("成功")
finally:
    # 无论如何都执行
    cleanup()
```

### 输入验证模板

```python
# 整数输入
while True:
    try:
        value = int(input("请输入整数："))
        if value < 0:
            print("必须是正数！")
            continue
        break
    except ValueError:
        print("请输入有效的整数！")

# 浮点数输入
while True:
    try:
        value = float(input("请输入数字："))
        if not (0 <= value <= 100):
            print("必须在0-100之间！")
            continue
        break
    except ValueError:
        print("请输入有效的数字！")
```

---

## 输入验证速查

### 非空检查

```python
name = input("姓名：").strip()
if not name:  # 或 if name == ""
    print("不能为空！")
```

### 数字检查

```python
text = "abc123"
text.isdigit()      # False（是否全是数字）
text.isalpha()      # False（是否全是字母）
text.isalnum()      # True（是否数字或字母）
```

### 范围检查

```python
age = 25
if not (0 <= age <= 150):
    print("年龄不在有效范围！")

# 或
if age < 0 or age > 150:
    print("年龄不在有效范围！")
```

### 姓名验证（不含数字）

```python
name = "Alice123"
if any(char.isdigit() for char in name):
    print("姓名不能包含数字！")
```

---

## 常用数学运算

### 整数除法

```python
# 除法
10 / 3      # 3.3333...（浮点数）

# 整除（向下取整）
10 // 3     # 3（整数）

# 取余
10 % 3      # 1（余数）

# 幂运算
2 ** 3      # 8（2的3次方）
```

### 取整函数

```python
import math

x = 3.7

round(x)        # 4（四舍五入）
math.floor(x)   # 3（向下取整）
math.ceil(x)    # 4（向上取整）
int(x)          # 3（截断小数）
```

---

## 检查清单

### 语法检查 ✓
- [ ] 关键字拼写正确
- [ ] 使用英文符号
- [ ] if/for/while/def 后有冒号
- [ ] 引号匹配
- [ ] 括号匹配
- [ ] 使用 == 比较，不是 =

### 缩进检查 ✓
- [ ] 代码块有缩进（4个空格）
- [ ] 缩进一致
- [ ] 不混用Tab和空格

### 错误处理 ✓
- [ ] input() 转换用 try-except
- [ ] 检查输入范围
- [ ] 处理除零情况
- [ ] 验证输入有效性

### 格式检查 ✓
- [ ] 人数是整数（无小数）
- [ ] 金额保留2位小数
- [ ] 百分比格式正确
- [ ] 输出格式整齐

---

## 快速调试

### 查看变量类型

```python
x = "123"
print(type(x))  # <class 'str'>

x = 123
print(type(x))  # <class 'int'>
```

### 调试输出

```python
x = 10
y = 20
print(f"Debug: x={x}, y={y}")  # 临时调试
```

### 测试边界情况

```python
# 测试以下情况：
test_cases = [
    0,          # 零
    -1,         # 负数
    "",         # 空字符串
    "abc",      # 非数字字符串
    100,        # 边界值
    101,        # 超出范围
]
```

---

## 考试快速提示

### 遇到错误信息？

1. **SyntaxError** → 检查拼写、符号、冒号
2. **IndentationError** → 检查缩进
3. **ValueError** → 添加 try-except
4. **TypeError** → 检查类型转换
5. **ZeroDivisionError** → 检查分母

### 记住这些模式

```python
# 模式1：获取整数
while True:
    try:
        n = int(input("输入："))
        break
    except ValueError:
        print("错误！")

# 模式2：格式化小数
print(f"{value:.2f}")

# 模式3：人数分配
base = total // count
extra = total % count

# 模式4：验证非空
text = input("输入：").strip()
if not text:
    print("不能为空！")
```

---

**提示：考试时将此表打印出来，快速查找！**
